{"version":3,"sources":["src/react-dom/dom.js","src/react-dom/render.js","src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/index.js","src/index.js"],"names":["setAttribute","dom","name","value","test","toLowerCase","vaule","style","cssText","key","hasOwnPrototype","removeAttribute","createComponent","component","props","newComponent","prototype","Component","constructor","render","renderComponent","renderor","base","componentWillUpdate","_render","componentDidUpdate","componentDidMount","parentNode","replaceChild","setComponentProps","componentWillMount","componentWillReceiveProps","vnode","textNode","document","createTextNode","tag","attrs","DOM","createElement","Object","keys","forEach","Array","isArray","children","child","container","appendChild","state","stateChange","assign","Counter","num","console","log","setState","onClick","React","ReactDOM","querySelector"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["function setAttribute(dom, name, value = '') {\n    if (name === 'className') name = 'class'\n\n    if (/on\\w+/.test(name)) {\n        name = name.toLowerCase()\n        dom[name] = value\n    } else if (name === 'style') {\n        if (!vaule || typeof value === 'string') {\n            dom.style.cssText = value\n        } else if (value && typeof value === 'object') {\n            for (let key in value) {\n                dom.style[key] = typeof value[key] === 'number' ? `${value[key]}px` : value[key]\n            }\n        }\n    } else {\n        if (dom.hasOwnPrototype(name)) {\n            dom[name] = value\n        }\n        if (value) {\n            dom.setAttribute(name, value)\n        } else {\n            dom.removeAttribute(name)\n        }\n    }\n}\n\nexport default setAttribute;","import setAttribute from './dom';\nimport Component from '../react/component';\n\n// 创建组件\nfunction createComponent(component, props) {\n    let newComponent;\n\n    if ('render' in component.prototype) {\n        newComponent = new component(props);\n    } else {\n        newComponent = new Component(props);\n        newComponent.constructor = component;\n        newComponent.render = function () {\n            return this.constructor(props);\n        }\n    }\n\n    return newComponent;\n}\n\n// 更新组件\nfunction renderComponent(component) {\n    const renderor = component.render();\n\n    if (component.base && component.componentWillUpdate) {\n        component.componentWillUpdate();\n    }\n    let base = _render(renderor);\n\n    if (component.base && component.componentDidUpdate) {\n        component.componentDidUpdate();\n    } else if (component.componentDidMount) {\n        component.componentDidMount();\n    }\n\n    if (component.base && component.base.parentNode) {\n        component.base.parentNode.replaceChild(base, component.base);\n    }\n\n    component.base = base;\n}\n\n// 设置组件属性\nfunction setComponentProps(component, props) {\n    if (!component.base && component.componentWillMount) {\n        component.componentWillMount();\n    } else if (component.componentWillReceiveProps) {\n        component.componentWillReceiveProps(props);\n    }\n\n    component.props = props;\n\n    renderComponent(component);\n}\n\nfunction _render(vnode) {\n    if (!vnode) vnode = ''\n\n    if (typeof vnode === 'string' || typeof vnode === 'number') {\n        const textNode = document.createTextNode(vnode)\n        return textNode\n    }\n\n    if (typeof vnode.tag === 'function') {\n        const component = createComponent(vnode.tag, vnode.attrs);\n        setComponentProps(component, vnode.attrs);\n\n        return component.base;\n    }\n\n    const DOM = document.createElement(vnode.tag)\n    if (vnode.attrs) {\n        Object.keys(vnode.attrs).forEach(key => {\n            const value = vnode.attrs[key]\n            setAttribute(DOM, key, value)\n        })\n    }\n\n    if (Array.isArray(vnode.children)) {\n        vnode.children.forEach(child => {\n            render(child, DOM)\n        })\n    }\n\n    return DOM;\n}\n\nfunction render(vnode, container) {\n    return container.appendChild(_render(vnode));\n}\n\nexport {\n    render,\n    renderComponent,\n}\n","import { renderComponent } from '../react-dom/render';\n\nclass Component {\n    constructor(props = {}) {\n        this.state = {};\n        this.props = props;\n    }\n\n    setState(stateChange) {\n        Object.assign(this.state, stateChange);\n        renderComponent(this);\n    }\n}\n\nexport default Component;\n","const createElement = function (tag, attrs, ...children) {\n    return {\n        tag,\n        attrs,\n        children,\n    }\n}\n\nexport default createElement;","import Component from './component';\nimport createElement from './create-element';\n\nexport default {\n    Component,\n    createElement\n};","import { render, renderComponent } from './render';\n\nexport default {\n    render,\n    renderComponent\n}","import React from './react';\nimport ReactDOM from './react-dom';\n\nclass Counter extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { num: 1 };\n    }\n\n    componentWillUpdate() {\n        console.log( 'update execute' );\n    }\n\n    componentWillMount() {\n        console.log( 'mount execute' );\n    }\n\n    onClick() {\n        this.setState({ num: this.state.num+1 });\n    }\n\n    render() {\n        return (\n          <div>\n            <h1> count: { this.state.num } </h1>\n            <button onClick={()=> this.onClick() } > add </button>\n          </div>\n        )\n    }\n};\n\nReactDOM.render(\n  <Counter />,\n  document.querySelector('#app')\n);"]}